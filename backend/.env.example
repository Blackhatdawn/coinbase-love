# ============================================
# CRYPTOVAULT BACKEND ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!
# ============================================

# ============================================
# REQUIRED: DATABASE CONFIGURATION
# ============================================

# MongoDB Connection String
# Local Development: mongodb://localhost:27017/
# MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority
MONGO_URL=mongodb://localhost:27017/

# Database Name
DB_NAME=cryptovault_db

# ============================================
# REQUIRED: SECURITY CONFIGURATION
# ============================================

# JWT Secret Key (REQUIRED - minimum 32 characters for security)
# Generate with: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-must-be-at-least-32-characters-long

# JWT Algorithm
JWT_ALGORITHM=HS256

# Token Expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# CORS CONFIGURATION
# ============================================

# Allowed Origins (comma-separated)
# Development: Use * for convenience
# Production: MUST be specific URLs (no wildcards!)
# Example: https://yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Enable cross-site cookies (required when frontend/API on different domains)
USE_CROSS_SITE_COOKIES=false

# ============================================
# SERVER CONFIGURATION
# ============================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Port (Render/Heroku set this via $PORT automatically)
# PORT=8000

# Application URL (for email links, password resets)
APP_URL=http://localhost:3000

# ============================================
# EMAIL CONFIGURATION
# ============================================

# Email Service: "sendgrid" or "mock"
# Use "mock" for development (emails logged instead of sent)
EMAIL_SERVICE=mock

# SendGrid API Key (required if EMAIL_SERVICE=sendgrid)
# Get from: https://sendgrid.com/
SENDGRID_API_KEY=SG.your_sendgrid_api_key_here

# Sender Email Address
EMAIL_FROM=noreply@cryptovault.com

# Sender Name
EMAIL_FROM_NAME=CryptoVault Financial

# ============================================
# CRYPTOCURRENCY API
# ============================================

# CoinGecko API Key (optional but recommended)
# Get from: https://www.coingecko.com/en/api
COINGECKO_API_KEY=

# Use Mock Prices (for development/testing)
# Set to true to avoid API rate limits during development
USE_MOCK_PRICES=true

# Alternative price APIs (optional)
COINCAP_API_KEY=
COINMARKETCAP_API_KEY=

# ============================================
# REDIS CACHING (Upstash)
# ============================================

# Enable Redis Caching
USE_REDIS=false

# Upstash Redis REST URL
# Get from: https://upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io

# Upstash Redis REST Token
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token_here

# ============================================
# ERROR TRACKING (Sentry)
# ============================================

# Sentry DSN for error tracking
# Get from: https://sentry.io/
# Leave empty to disable Sentry
SENTRY_DSN=

# Sentry Environment
SENTRY_ENVIRONMENT=development

# Sentry Traces Sample Rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Sentry Profiles Sample Rate (0.0 to 1.0)
SENTRY_PROFILES_SAMPLE_RATE=0.1

# ============================================
# PUBLIC RUNTIME CONFIG (served via /api/config)
# ============================================
# These values are exposed to the frontend at runtime

# API base URL (optional, auto-derived if empty)
PUBLIC_API_URL=

# WebSocket base URL (optional, auto-derived if empty)
PUBLIC_WS_URL=

# Socket.IO path
PUBLIC_SOCKET_IO_PATH=/socket.io/

# Branding
PUBLIC_SITE_NAME=CryptoVault
PUBLIC_LOGO_URL=
PUBLIC_SUPPORT_EMAIL=support@cryptovault.com

# Frontend Sentry DSN (public)
PUBLIC_SENTRY_DSN=

# ============================================
# PAYMENT GATEWAY (NOWPayments)
# ============================================

# NOWPayments API Key
# Get from: https://nowpayments.io/
NOWPAYMENTS_API_KEY=your_nowpayments_api_key_here

# NOWPayments IPN Secret
NOWPAYMENTS_IPN_SECRET=your_nowpayments_ipn_secret_here

# Sandbox mode (true for development)
NOWPAYMENTS_SANDBOX=true

# ============================================
# FIREBASE (Push Notifications)
# ============================================

# Firebase Admin SDK Credentials Path
FIREBASE_CREDENTIALS_PATH=

# Or Firebase Admin SDK Credentials JSON
FIREBASE_CREDENTIALS_JSON=

# ============================================
# RATE LIMITING
# ============================================

RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_PER_MINUTE=5
RATE_LIMIT_SIGNUP_PER_MINUTE=3
RATE_LIMIT_PASSWORD_RESET_PER_MINUTE=2

# ============================================
# PERFORMANCE SETTINGS
# ============================================

REQUEST_TIMEOUT_SECONDS=30
MAX_REQUEST_SIZE_MB=10
ENABLE_COMPRESSION=true

# MongoDB Connection Pool
MONGO_MAX_POOL_SIZE=50
MONGO_MIN_POOL_SIZE=10
MONGO_SERVER_SELECTION_TIMEOUT_MS=5000

# ============================================
# NOTES
# ============================================
# 
# Required for basic functionality:
# - MONGO_URL
# - DB_NAME
# - JWT_SECRET (min 32 chars)
# - CORS_ORIGINS (specific URLs in production!)
#
# Required for production email:
# - EMAIL_SERVICE=sendgrid
# - SENDGRID_API_KEY
#
# Required for live prices:
# - COINGECKO_API_KEY (or set USE_MOCK_PRICES=true)
#
# Recommended for production:
# - Redis caching (UPSTASH_*)
# - Sentry error tracking (SENTRY_DSN)
#
# ============================================
