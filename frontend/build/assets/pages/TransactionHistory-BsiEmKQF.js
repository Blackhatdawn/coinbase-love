import{r as e,j as s,ae as a,C as t,af as r,u as n,A as l,ag as d,ah as o,ai as i,aj as c,ak as m}from"../vendor-BDLfEzqu.js";import{c as x,b as u,B as h}from"./Auth-D695z8Jc.js";import{C as f,a as p,b as j,d as g}from"./Contact-SV3dEBhu.js";import{S as y,a as N,b,c as v,d as w}from"./EnhancedTrade-Dhpui7_0.js";import{B as _,E as S,F as C,G as A}from"../ui-vendor-DZd8bb7k.js";import{b as F}from"../core-DQAxYPa2.js";const T=C,z=A,k=e.forwardRef(({className:e,align:a="center",sideOffset:t=4,...r},n)=>s.jsx(_,{children:s.jsx(S,{ref:n,align:a,sideOffset:t,className:x("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));function B({className:e,classNames:n,showOutsideDays:l=!0,...d}){return s.jsx(a,{showOutsideDays:l,className:x("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:x(u({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:x(u({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({...e})=>s.jsx(r,{className:"h-4 w-4"}),IconRight:({...e})=>s.jsx(t,{className:"h-4 w-4"})},...d})}k.displayName=S.displayName,B.displayName="Calendar";const D=()=>{const a=n(),[t,r]=e.useState([]),[u,_]=e.useState(!0),[S,C]=e.useState("all"),[A,D]=e.useState(),[E,L]=e.useState();e.useEffect(()=>{(async()=>{try{_(!0);const e=await F.transactions.getAll();r(e.transactions||[])}catch(e){console.error("Failed to fetch transactions:",e),r([])}finally{_(!1)}})()},[]);const O=t.filter(e=>{if("all"!==S&&e.type!==S)return!1;const s=new Date(e.createdAt);return!(A&&s<A)&&!(E&&s>E)});return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx(h,{variant:"ghost",size:"icon",onClick:()=>a("/dashboard"),children:s.jsx(l,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-3xl font-bold",children:"Transaction History"})]}),s.jsxs(f,{className:"mb-6",children:[s.jsx(p,{className:"pb-4",children:s.jsxs(j,{className:"text-lg flex items-center gap-2",children:[s.jsx(d,{className:"h-5 w-5"}),"Filters"]})}),s.jsx(g,{children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),s.jsxs(y,{value:S,onValueChange:C,children:[s.jsx(N,{className:"w-[140px]",children:s.jsx(b,{placeholder:"All"})}),s.jsxs(v,{children:[s.jsx(w,{value:"all",children:"All"}),s.jsx(w,{value:"buy",children:"Buy"}),s.jsx(w,{value:"sell",children:"Sell"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"From"}),s.jsxs(T,{children:[s.jsx(z,{asChild:!0,children:s.jsxs(h,{variant:"outline",className:x("w-[160px] justify-start text-left font-normal",!A&&"text-muted-foreground"),children:[s.jsx(i,{className:"mr-2 h-4 w-4"}),A?o(A,"PP"):"Start date"]})}),s.jsx(k,{className:"w-auto p-0",align:"start",children:s.jsx(B,{mode:"single",selected:A,onSelect:D,initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"To"}),s.jsxs(T,{children:[s.jsx(z,{asChild:!0,children:s.jsxs(h,{variant:"outline",className:x("w-[160px] justify-start text-left font-normal",!E&&"text-muted-foreground"),children:[s.jsx(i,{className:"mr-2 h-4 w-4"}),E?o(E,"PP"):"End date"]})}),s.jsx(k,{className:"w-auto p-0",align:"start",children:s.jsx(B,{mode:"single",selected:E,onSelect:L,initialFocus:!0,className:"pointer-events-auto"})})]})]}),s.jsx(h,{variant:"ghost",onClick:()=>{C("all"),D(void 0),L(void 0)},children:"Clear"})]})})]}),s.jsxs(f,{children:[s.jsx(p,{children:s.jsxs(j,{children:["Transactions (",u?"Loading...":O.length,")"]})}),s.jsx(g,{children:u?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Loading transactions..."}):0===O.length?s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions found"}):s.jsx("div",{className:"space-y-3",children:O.map(e=>{const a="buy"===e.type,t=new Date(e.createdAt);return s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-secondary/50 hover:bg-secondary transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:x("p-2 rounded-full",a?"bg-green-500/20":"bg-red-500/20"),children:a?s.jsx(c,{className:"h-5 w-5 text-green-500"}):s.jsx(m,{className:"h-5 w-5 text-red-500"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[a?"Bought":"Sold"," ",e.symbol||"Crypto"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.amount," ",e.symbol," ",e.description&&`- ${e.description}`]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:x("font-semibold",a?"text-green-500":"text-red-500"),children:[a?"-":"+","$",e.amount.toLocaleString()]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o(t,"MMM d, yyyy")})]})]},e.id)})})})]})]})})};export{D as T};
