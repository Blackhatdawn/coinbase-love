import{r as e,j as s,K as a,O as t,h as r,z as l,Q as n,k as i,d as c,R as d,V as o,I as m,X as x,_ as u,$ as h,a0 as p,a1 as f,a2 as j,a3 as g,W as N}from"../vendor-BDLfEzqu.js";import{C as b,a as y,b as v,d as w,H as S,F as C}from"./Contact-SV3dEBhu.js";import{q as F}from"../charts-vendor-CwINwY_X.js";import{c as k,B as P,L as E,I as T}from"./Auth-D695z8Jc.js";import{b as $,c as R,u as z}from"../core-DQAxYPa2.js";import{h as G,i as A,j as B,k as D,l as L,m as I,V,n as _,o as H,p as M,q as O,r as W,s as U,t as Y,v as q,O as K,w as Q,x as X,y as J,z as Z,D as ee,A as se,u as ae}from"../ui-vendor-DZd8bb7k.js";const te=U,re=Y,le=e.forwardRef(({className:e,children:t,...r},l)=>s.jsxs(G,{ref:l,className:k("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(A,{asChild:!0,children:s.jsx(a,{className:"h-4 w-4 opacity-50"})})]}));le.displayName=G.displayName;const ne=e.forwardRef(({className:e,...a},r)=>s.jsx(B,{ref:r,className:k("flex cursor-default items-center justify-center py-1",e),...a,children:s.jsx(t,{className:"h-4 w-4"})}));ne.displayName=B.displayName;const ie=e.forwardRef(({className:e,...t},r)=>s.jsx(D,{ref:r,className:k("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(a,{className:"h-4 w-4"})}));ie.displayName=D.displayName;const ce=e.forwardRef(({className:e,children:a,position:t="popper",...r},l)=>s.jsx(L,{children:s.jsxs(I,{ref:l,className:k("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[s.jsx(ne,{}),s.jsx(V,{className:k("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),s.jsx(ie,{})]})}));ce.displayName=I.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(_,{ref:t,className:k("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=_.displayName;const de=e.forwardRef(({className:e,children:a,...t},l)=>s.jsxs(H,{ref:l,className:k("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...t,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(M,{children:s.jsx(r,{className:"h-4 w-4"})})}),s.jsx(O,{children:a})]}));de.displayName=H.displayName;e.forwardRef(({className:e,...a},t)=>s.jsx(W,{ref:t,className:k("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=W.displayName;const oe=[{label:"1D",days:1},{label:"7D",days:7},{label:"30D",days:30},{label:"90D",days:90},{label:"1Y",days:365}],me=({coinId:a,coinName:t,currentPrice:r,priceChange24h:c})=>{const d=e.useRef(null),o=e.useRef(null),m=e.useRef(null),[x,u]=e.useState(7),[h,p]=e.useState(!1),[f,j]=e.useState(null);return e.useEffect(()=>{if(!d.current)return;const e=F(d.current,{layout:{background:{color:"transparent"},textColor:"#d1d5db"},grid:{vertLines:{color:"rgba(42, 46, 57, 0.3)"},horzLines:{color:"rgba(42, 46, 57, 0.3)"}},crosshair:{mode:1,vertLine:{labelBackgroundColor:"#667eea"},horzLine:{labelBackgroundColor:"#667eea"}},timeScale:{borderColor:"#2B2B43",timeVisible:!0,secondsVisible:!1},rightPriceScale:{borderColor:"#2B2B43"}}),s=e.addAreaSeries({lineColor:c>=0?"#10b981":"#ef4444",topColor:c>=0?"rgba(16, 185, 129, 0.4)":"rgba(239, 68, 68, 0.4)",bottomColor:"rgba(16, 185, 129, 0.0)",lineWidth:2,priceFormat:{type:"price",precision:2,minMove:.01}});o.current=e,m.current=s;const a=()=>{d.current&&o.current&&o.current.applyOptions({width:d.current.clientWidth,height:400})};return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a),e.remove()}},[c]),e.useEffect(()=>{(async()=>{const e=await(async e=>{p(!0),j(null);try{return(await $.crypto.getHistory(a,e)).history}catch(s){return console.error("Error fetching price history:",s),j("Failed to load chart data"),[]}finally{p(!1)}})(x);if(e.length>0&&m.current){const s=e.map(e=>({time:e.timestamp,value:e.price}));m.current.setData(s),o.current&&o.current.timeScale().fitContent()}})()},[x,a]),s.jsxs(b,{children:[s.jsx(y,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(v,{className:"text-2xl",children:[t," Price Chart"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsxs("span",{className:"text-3xl font-bold",children:["$",r.toLocaleString()]}),s.jsxs("div",{className:"flex items-center gap-1 "+(c>=0?"text-green-600":"text-red-600"),children:[c>=0?s.jsx(l,{className:"h-5 w-5"}):s.jsx(n,{className:"h-5 w-5"}),s.jsxs("span",{className:"text-lg font-semibold",children:[c>=0?"+":"",c.toFixed(2),"%"]})]})]})]}),s.jsx("div",{className:"flex gap-2",children:oe.map(e=>s.jsx(P,{variant:x===e.days?"default":"outline",size:"sm",onClick:()=>u(e.days),disabled:h,children:e.label},e.days))})]})}),s.jsxs(w,{children:[h&&s.jsx("div",{className:"flex items-center justify-center h-[400px]",children:s.jsx(i,{className:"h-8 w-8 animate-spin text-purple-600"})}),f&&s.jsx("div",{className:"flex items-center justify-center h-[400px] text-red-600",children:f}),s.jsx("div",{ref:d,className:h||f?"hidden":"",style:{height:"400px",width:"100%"}})]})]})},xe=c("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ue({className:e,variant:a,...t}){return s.jsx("div",{className:k(xe({variant:a}),e),...t})}const he=e.forwardRef(({className:e,orientation:a="horizontal",decorative:t=!0,...r},l)=>s.jsx(q,{ref:l,decorative:t,orientation:a,className:k("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...r}));he.displayName=q.displayName;const pe=({transactionTo:a,transactionAmount:t,ethPriceUSD:r=2500})=>{const{provider:i,chainId:c,networkName:x}=R(),[u,h]=e.useState("0"),[p,f]=e.useState("21000"),[j,g]=e.useState(!1),[N,S]=e.useState("stable"),C=async()=>{if(i)try{g(!0);const e=await i.getFeeData();if(e.gasPrice){const s=Number(e.gasPrice)/1e9;h(s.toFixed(2)),S(s>50?"up":s<20?"down":"stable")}}catch(e){console.error("Error fetching gas price:",e)}finally{g(!1)}},F=e=>(parseFloat(e)*parseFloat(p)/1e9*r).toFixed(2);e.useEffect(()=>{C();const e=setInterval(C,15e3);return()=>clearInterval(e)},[i]),e.useEffect(()=>{(async()=>{if(i&&a&&t)try{const e=await i.estimateGas({to:a,value:BigInt(Math.floor(1e18*parseFloat(t)))});f(e.toString())}catch(e){console.error("Error estimating gas:",e),f("21000")}else f("21000")})()},[a,t,i]);const k=(()=>{const e=parseFloat(u);return{slow:(.8*e).toFixed(2),average:e.toFixed(2),fast:(1.3*e).toFixed(2),timestamp:Date.now()}})();return x&&!["Ethereum","Polygon","Sepolia"].includes(x)?null:s.jsxs(b,{children:[s.jsx(y,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(v,{className:"flex items-center gap-2",children:[s.jsx(d,{className:"h-5 w-5"}),"Gas Price Tracker"]}),s.jsxs(ue,{variant:"up"===N?"destructive":"down"===N?"default":"secondary",children:["up"===N&&s.jsx(l,{className:"h-3 w-3 mr-1"}),"down"===N&&s.jsx(n,{className:"h-3 w-3 mr-1"}),"stable"===N&&"â”","up"===N?"High":"down"===N?"Low":"Normal"]})]})}),s.jsxs(w,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-500/10 to-blue-500/10 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Gas Price"}),s.jsxs("p",{className:"text-2xl font-bold",children:[u," Gwei"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["â‰ˆ $",F(u)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Network"}),s.jsx("p",{className:"text-lg font-semibold",children:x||"Ethereum"})]})]}),s.jsx(he,{}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 border rounded-lg hover:border-purple-500 transition-colors cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(o,{className:"h-4 w-4 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Slow"})]}),s.jsx("p",{className:"text-xl font-bold",children:k.slow}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gwei"}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["$",F(k.slow)]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"~5 min"})]}),s.jsxs("div",{className:"p-3 border-2 border-purple-500 rounded-lg bg-purple-500/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(m,{className:"h-4 w-4 text-purple-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Average"})]}),s.jsx("p",{className:"text-xl font-bold",children:k.average}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gwei"}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["$",F(k.average)]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"~2 min"})]}),s.jsxs("div",{className:"p-3 border rounded-lg hover:border-purple-500 transition-colors cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(l,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Fast"})]}),s.jsx("p",{className:"text-xl font-bold",children:k.fast}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gwei"}),s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["$",F(k.fast)]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"~30 sec"})]})]}),a&&t&&s.jsxs(s.Fragment,{children:[s.jsx(he,{}),s.jsxs("div",{className:"p-3 bg-secondary/30 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Estimated Transaction Cost"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Gas Limit:"}),s.jsx("span",{className:"font-mono",children:p})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Gas Price:"}),s.jsxs("span",{className:"font-mono",children:[k.average," Gwei"]})]}),s.jsx(he,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between font-semibold text-base",children:[s.jsx("span",{children:"Total Cost:"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{children:["$",F(k.average)]}),s.jsxs("p",{className:"text-xs text-muted-foreground font-normal",children:[(parseFloat(k.average)*parseFloat(p)/1e9).toFixed(6)," ETH"]})]})]})]})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Gas prices update every 15 seconds"})]})]})},fe=se,je=Q,ge=e.forwardRef(({className:e,...a},t)=>s.jsx(K,{ref:t,className:k("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));ge.displayName=K.displayName;const Ne=e.forwardRef(({className:e,children:a,...t},r)=>s.jsxs(je,{children:[s.jsx(ge,{}),s.jsxs(X,{ref:r,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,s.jsxs(J,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ne.displayName=X.displayName;const be=({className:e,...a})=>s.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});be.displayName="DialogHeader";const ye=({className:e,...a})=>s.jsx("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});ye.displayName="DialogFooter";const ve=e.forwardRef(({className:e,...a},t)=>s.jsx(Z,{ref:t,className:k("text-lg font-semibold leading-none tracking-tight",e),...a}));ve.displayName=Z.displayName;const we=e.forwardRef(({className:e,...a},t)=>s.jsx(ee,{ref:t,className:k("text-sm text-muted-foreground",e),...a}));we.displayName=ee.displayName;const Se=c("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ce=e.forwardRef(({className:e,variant:a,...t},r)=>s.jsx("div",{ref:r,role:"alert",className:k(Se({variant:a}),e),...t}));Ce.displayName="Alert";e.forwardRef(({className:e,...a},t)=>s.jsx("h5",{ref:t,className:k("mb-1 font-medium leading-none tracking-tight",e),...a})).displayName="AlertTitle";const Fe=e.forwardRef(({className:e,...a},t)=>s.jsx("div",{ref:t,className:k("text-sm [&_p]:leading-relaxed",e),...a}));Fe.displayName="AlertDescription";const ke=({open:a,onOpenChange:t,type:r,coinSymbol:l,coinName:n,currentPrice:c})=>{const{account:d,balance:o,sendTransaction:m,estimateGas:x,getGasPrice:j,networkName:g}=R(),[N,b]=e.useState(""),[y,v]=e.useState(""),[w,S]=e.useState(!1),[C,F]=e.useState(null),[k,$]=e.useState(null),[z,G]=e.useState(""),[A,B]=e.useState("");u.useEffect(()=>{(async()=>{if(N&&y&&parseFloat(N)>0)try{const e=await x(y,N);G(e);const s=await j();B(s)}catch(e){console.error("Gas estimation error:",e)}})()},[N,y]);return s.jsx(fe,{open:a,onOpenChange:t,children:s.jsxs(Ne,{className:"sm:max-w-[500px]",children:[s.jsxs(be,{children:[s.jsxs(ve,{className:"text-2xl",children:["buy"===r?"ðŸ›’ Buy":"ðŸ’° Sell"," ",n]}),s.jsx(we,{children:"buy"===r?`Purchase ${l} using your wallet`:`Sell your ${l} holdings`})]}),C?s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-3",children:[s.jsx(h,{className:"h-16 w-16 text-green-600"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Transaction Submitted!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your transaction has been sent to the blockchain"}),s.jsx(Ce,{children:s.jsx(Fe,{className:"font-mono text-xs break-all",children:C})}),s.jsx(P,{variant:"outline",onClick:()=>window.open(C&&g&&{Ethereum:`https://etherscan.io/tx/${C}`,Polygon:`https://polygonscan.com/tx/${C}`,Sepolia:`https://sepolia.etherscan.io/tx/${C}`}[g]||"#","_blank"),className:"w-full",children:"View on Explorer â†’"})]})}):s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"p-3 bg-secondary/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Price"}),s.jsxs("span",{className:"text-lg font-bold",children:["$",c.toLocaleString()]})]}),o&&s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Your Balance"}),s.jsxs("span",{className:"text-sm font-medium",children:[parseFloat(o).toFixed(4)," ","Polygon"===g?"MATIC":"ETH"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(E,{htmlFor:"amount",children:["Amount (","Polygon"===g?"MATIC":"ETH",")"]}),s.jsx(T,{id:"amount",type:"number",step:"0.0001",placeholder:"0.0000",value:N,onChange:e=>b(e.target.value),disabled:w}),N&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["â‰ˆ $",((parseFloat(N)||0)*c).toFixed(2)," USD"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(E,{htmlFor:"recipient",children:"Recipient Address"}),s.jsx(T,{id:"recipient",type:"text",placeholder:"0x...",value:y,onChange:e=>v(e.target.value),disabled:w,className:"font-mono text-sm"})]}),z&&A&&s.jsxs("div",{className:"p-3 bg-secondary/30 rounded-lg space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Estimated Gas"}),s.jsx("span",{className:"font-mono",children:z})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Gas Price"}),s.jsxs("span",{className:"font-mono",children:[A," Gwei"]})]}),s.jsxs("div",{className:"flex justify-between font-semibold pt-1 border-t",children:[s.jsx("span",{children:"Network Fee"}),s.jsxs("span",{children:[(parseFloat(A)*parseFloat(z)/1e9).toFixed(6)," ","Polygon"===g?"MATIC":"ETH"]})]})]}),k&&s.jsxs(Ce,{variant:"destructive",children:[s.jsx(p,{className:"h-4 w-4"}),s.jsx(Fe,{children:k})]}),"buy"===r&&s.jsxs(Ce,{children:[s.jsx(p,{className:"h-4 w-4"}),s.jsx(Fe,{className:"text-xs",children:"This is a simulated buy. In production, this would interact with a DEX or exchange contract."})]})]}),s.jsx(ye,{children:!C&&s.jsxs(s.Fragment,{children:[s.jsx(P,{variant:"outline",onClick:()=>t(!1),disabled:w,children:"Cancel"}),s.jsx(P,{onClick:async()=>{if(!N||parseFloat(N)<=0)return void $("Please enter a valid amount");if(!y||42!==y.length)return void $("Please enter a valid recipient address");if(!d)return void $("Wallet not connected");const e=parseFloat(N),s=parseFloat(o||"0");if("sell"===r&&e>s)$("Insufficient balance");else{S(!0),$(null);try{const e=await m(y,N);F(e),ae.success("Transaction successful!",{description:`${"buy"===r?"Bought":"Sold"} ${N} ${l}`}),setTimeout(()=>{b(""),v(""),F(null),t(!1)},3e3)}catch(a){$(a.message||"Transaction failed"),ae.error("Transaction failed",{description:a.message})}finally{S(!1)}}},disabled:w||!N||!y,className:"buy"===r?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:w?s.jsxs(s.Fragment,{children:[s.jsx(i,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"mr-2 h-4 w-4"}),"buy"===r?"Buy Now":"Sell Now"]})})]})})]})})},Pe=()=>{const a=z(),t=a?.user??null,{isConnected:r,account:n}=R(),[i,c]=e.useState([]),[d,o]=e.useState(null),[m,x]=e.useState(!0),[u,h]=e.useState(!1),[p,f]=e.useState(!1);e.useEffect(()=>{(async()=>{try{x(!0);const e=(await $.crypto.getAll()).cryptocurrencies||[];c(e),e.length>0&&o(e[0])}catch(e){console.error("Failed to fetch cryptocurrencies:",e),401!==e.status&&ae.error("Failed to load market data"),c([])}finally{x(!1)}})()},[]);return m?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(S,{}),s.jsx("main",{className:"pt-24 pb-20 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading trading dashboard..."})]})}),s.jsx(C,{})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(S,{}),s.jsx("main",{className:"pt-24 pb-20",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"font-display text-4xl md:text-5xl font-bold mb-3",children:["Advanced ",s.jsx("span",{className:"text-gradient",children:"Trading"})]}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Professional trading tools with real-time charts and on-chain transactions"})]}),s.jsxs(b,{className:"mb-6",children:[s.jsx(y,{children:s.jsxs(v,{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-5 w-5"}),"Select Trading Pair"]})}),s.jsx(w,{children:s.jsxs(te,{value:d?.id,onValueChange:e=>{const s=i.find(s=>s.id===e);s&&o(s)},children:[s.jsx(le,{className:"w-full md:w-[300px]",children:s.jsx(re,{placeholder:"Select cryptocurrency"})}),s.jsx(ce,{children:i.map(e=>s.jsx(de,{value:e.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&s.jsx("img",{src:e.image,alt:e.name,className:"w-5 h-5"}),s.jsxs("span",{children:[e.name," (",e.symbol,")"]}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:["$",e.price.toLocaleString()]})]})},e.id))})]})})]}),d&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsx(me,{coinId:d.id,coinName:d.name,currentPrice:d.price,priceChange24h:d.change_24h})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs(b,{children:[s.jsx(y,{children:s.jsxs(v,{className:"flex items-center gap-2",children:[s.jsx(g,{className:"h-5 w-5"}),"Place Order"]})}),s.jsxs(w,{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-500/10 to-blue-500/10 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Price"}),s.jsxs("div",{className:"flex items-center gap-1 "+(d.change_24h>=0?"text-green-600":"text-red-600"),children:[s.jsx(l,{className:"h-4 w-4"}),s.jsxs("span",{className:"text-sm font-semibold",children:[d.change_24h>=0?"+":"",d.change_24h.toFixed(2),"%"]})]})]}),s.jsxs("p",{className:"text-3xl font-bold",children:["$",d.price.toLocaleString()]})]}),r?s.jsx("div",{className:"p-4 bg-secondary/30 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Connected Wallet"}),s.jsxs("span",{className:"text-sm font-mono",children:[n?.slice(0,6),"...",n?.slice(-4)]})]})}):s.jsxs("div",{className:"p-4 border-2 border-dashed border-purple-500/50 rounded-lg text-center",children:[s.jsx(N,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),s.jsx("p",{className:"text-sm font-medium mb-1",children:"Wallet Not Connected"}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Connect your MetaMask wallet to start trading"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'Use the "Connect Wallet" button in the header'})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(P,{onClick:()=>{t?r?h(!0):ae.error("Please connect your wallet to trade"):ae.error("Please sign in to trade")},disabled:!t||!r,className:"w-full bg-green-600 hover:bg-green-700",size:"lg",children:[s.jsx(l,{className:"h-4 w-4 mr-2"}),"Buy ",d.symbol]}),s.jsxs(P,{onClick:()=>{t?r?f(!0):ae.error("Please connect your wallet to trade"):ae.error("Please sign in to trade")},disabled:!t||!r,variant:"destructive",className:"w-full",size:"lg",children:[s.jsx(l,{className:"h-4 w-4 mr-2 rotate-180"}),"Sell ",d.symbol]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Market Cap"}),s.jsxs("p",{className:"text-sm font-semibold",children:["$",(d.market_cap/1e9).toFixed(2),"B"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"24h Volume"}),s.jsxs("p",{className:"text-sm font-semibold",children:["$",(d.volume_24h/1e9).toFixed(2),"B"]})]})]})]})]}),r&&s.jsx(pe,{ethPriceUSD:d.price})]})]}),d&&s.jsxs(s.Fragment,{children:[s.jsx(ke,{open:u,onOpenChange:h,type:"buy",coinSymbol:d.symbol,coinName:d.name,currentPrice:d.price}),s.jsx(ke,{open:p,onOpenChange:f,type:"sell",coinSymbol:d.symbol,coinName:d.name,currentPrice:d.price})]})]})}),s.jsx(C,{})]})};export{Pe as E,te as S,le as a,re as b,ce as c,de as d};
